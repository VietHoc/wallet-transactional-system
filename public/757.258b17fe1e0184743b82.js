(self.webpackChunkwallet_client=self.webpackChunkwallet_client||[]).push([[757],{757:(e,t,s)=>{"use strict";s.r(t),s.d(t,{StockModule:()=>w});var r=s(8583),o=s(8994),n=s(8668),l=s(5240),i=s(639),c=s(8002),a=s(2340),d=s(1841);let u=(()=>{class e{constructor(e){this.http=e,this.baseUrl=`${a.N.baseUrl}`}getStocks(){return this.http.get(`${this.baseUrl}/api/stocks`).pipe((0,c.U)(e=>e.stocks))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(d.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=s(4853),h=s(9529),g=s(665),Z=s(6516),f=s(3928),k=s(4207);function v(e,t){if(1&e&&(i.TgZ(0,"div",14),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij(" ",e.errors,"")}}const S=[{path:"",component:(()=>{class e{constructor(e,t){this.stockService=e,this.walletService=t,this.transfer=0,this.transferDescription="",this.query="",this.stocks=[],this.wallets=[],this.selectedStock=null,this.selectedWallet=new l.w,this.errors=""}ngOnInit(){this.stockService.getStocks().subscribe(e=>{this.stocks=e})}onTransfer(){var e,t;this.walletService.transfer(null===(e=this.selectedWallet)||void 0===e?void 0:e.id,this.transfer,this.transferDescription,null===(t=this.selectedStock)||void 0===t?void 0:t.wallet_id).subscribe(e=>{window.location.reload()},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}searchWallets(){this.walletService.searchWallets(this.query).subscribe(e=>{this.wallets=e})}selectWallet(e){this.selectedWallet=e}onDeposit(){var e,t;this.walletService.deposit(this.transfer,this.transferDescription,null===(e=this.selectedStock)||void 0===e?void 0:e.wallet_id,null===(t=this.selectedStock)||void 0===t?void 0:t.wallet_id).subscribe(e=>{this.selectedStock.balance=+this.selectedStock.balance+ +this.transfer,this.transferDescription="",this.errors=""},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}onWithdraw(){var e,t;this.walletService.withdraw(this.transfer,this.transferDescription,null===(e=this.selectedStock)||void 0===e?void 0:e.wallet_id,null===(t=this.selectedStock)||void 0===t?void 0:t.wallet_id).subscribe(e=>{this.selectedStock.balance=+this.selectedStock.balance-+this.transfer,this.transferDescription="",this.errors=""},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(u),i.Y36(p.X))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-stock"]],decls:39,vars:13,consts:[[1,"grid"],[1,"col-6"],[1,"mb-2"],[1,"grid","mb-4"],[1,"col-4"],["placeholder","Select stock","optionLabel","name",1,"col-4",3,"options","ngModel","ngModelChange"],["field","description","placeholder","Ex: 4bfc1524-ccd3-490a-9dee-a0c1a46c8bc0",1,"col-4",3,"ngModel","autofocus","size","suggestions","ngModelChange","completeMethod","onSelect"],["type","number","pInputText","",1,"col-4",3,"ngModel","ngModelChange"],["type","text","pInputText","",1,"col-4",3,"ngModel","ngModelChange"],["style","color:red;",4,"ngIf"],["pButton","","type","button","label","Deposit",1,"mt-4","mr-2",3,"click"],["pButton","","type","button","label","Withdraw",1,"mt-4","mr-2",3,"click"],["pButton","","type","button","label","Transfer",1,"mt-4",3,"click"],[1,"mt-4","stock-info"],[2,"color","red"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"h4",2),i._uU(3," Transfer money to wallet: "),i.qZA(),i.TgZ(4,"div"),i.TgZ(5,"div",3),i.TgZ(6,"span",4),i._uU(7,"Select stock: "),i.qZA(),i.TgZ(8,"p-dropdown",5),i.NdJ("ngModelChange",function(e){return t.selectedStock=e}),i.qZA(),i.qZA(),i.TgZ(9,"div",3),i.TgZ(10,"span",4),i._uU(11,"Find wallet address: User, stock or Stock (Skip for Deposit and Withdraw)"),i.qZA(),i.TgZ(12,"p-autoComplete",6),i.NdJ("ngModelChange",function(e){return t.query=e})("completeMethod",function(){return t.searchWallets()})("onSelect",function(e){return t.selectWallet(e)}),i.qZA(),i.qZA(),i.TgZ(13,"div",3),i.TgZ(14,"span",4),i._uU(15,"Amount: "),i.qZA(),i.TgZ(16,"input",7),i.NdJ("ngModelChange",function(e){return t.transfer=e}),i.qZA(),i.qZA(),i.TgZ(17,"div",0),i.TgZ(18,"span",4),i._uU(19,"Description: "),i.qZA(),i.TgZ(20,"input",8),i.NdJ("ngModelChange",function(e){return t.transferDescription=e}),i.qZA(),i.qZA(),i.qZA(),i.YNc(21,v,2,1,"div",9),i.TgZ(22,"button",10),i.NdJ("click",function(){return t.onDeposit()}),i.qZA(),i.TgZ(23,"button",11),i.NdJ("click",function(){return t.onWithdraw()}),i.qZA(),i.TgZ(24,"button",12),i.NdJ("click",function(){return t.onTransfer()}),i.qZA(),i.qZA(),i.TgZ(25,"div",1),i.TgZ(26,"div",13),i.TgZ(27,"div"),i._uU(28," Stock: "),i.TgZ(29,"strong"),i._uU(30),i.qZA(),i.qZA(),i.TgZ(31,"div"),i._uU(32," Balance: "),i.TgZ(33,"strong"),i._uU(34),i.qZA(),i.qZA(),i.TgZ(35,"div"),i._uU(36," Wallet address: "),i.TgZ(37,"strong"),i._uU(38),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(8),i.Q6J("options",t.stocks)("ngModel",t.selectedStock),i.xp6(4),i.Q6J("ngModel",t.query)("autofocus",!0)("size",30)("suggestions",t.wallets),i.xp6(4),i.Q6J("ngModel",t.transfer),i.xp6(4),i.Q6J("ngModel",t.transferDescription),i.xp6(1),i.Q6J("ngIf",t.errors),i.xp6(9),i.Oqu(null==t.selectedStock?null:t.selectedStock.name),i.xp6(4),i.AsE("",(+(null==t.selectedStock?null:t.selectedStock.balance)).toFixed(2)," ",null==t.selectedStock?null:t.selectedStock.currency,""),i.xp6(4),i.Oqu(null==t.selectedStock?null:t.selectedStock.wallet_address))},directives:[h.Lt,g.JJ,g.On,Z.Qc,g.wV,g.Fj,f.o,r.O5,k.Hq],styles:[".stock-info[_ngcontent-%COMP%]{background:#ccc;border-radius:12px;padding:16px}"]}),e})(),canActivate:[n.a]}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[o.Bz.forChild(S)],o.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[r.ez,b,g.u5,g.UX,f.j,k.hJ,h.kW,Z.WN]]}),e})()}}]);