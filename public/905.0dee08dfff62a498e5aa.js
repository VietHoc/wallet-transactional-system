(self.webpackChunkwallet_client=self.webpackChunkwallet_client||[]).push([[905],{905:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TeamModule:()=>w});var s=r(8583),n=r(8994),l=r(8668),i=r(5240),o=r(639),a=r(8002),c=r(2340),d=r(1841);let u=(()=>{class e{constructor(e){this.http=e,this.baseUrl=`${c.N.baseUrl}`}getTeams(){return this.http.get(`${this.baseUrl}/api/teams`).pipe((0,a.U)(e=>e.teams))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(d.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=r(4853),h=r(9529),g=r(665),m=r(6516),T=r(3928),Z=r(4207);function f(e,t){if(1&e&&(o.TgZ(0,"div",14),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.hij(" ",e.errors,"")}}const v=[{path:"",component:(()=>{class e{constructor(e,t){this.teamService=e,this.walletService=t,this.transfer=0,this.transferDescription="",this.query="",this.teams=[],this.wallets=[],this.selectedTeam=null,this.selectedWallet=new i.w,this.errors=""}ngOnInit(){this.teamService.getTeams().subscribe(e=>{this.teams=e})}onTransfer(){var e,t;this.walletService.transfer(null===(e=this.selectedWallet)||void 0===e?void 0:e.id,this.transfer,this.transferDescription,null===(t=this.selectedTeam)||void 0===t?void 0:t.wallet_id).subscribe(e=>{window.location.reload()},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}searchWallets(){this.walletService.searchWallets(this.query).subscribe(e=>{this.wallets=e})}selectWallet(e){this.selectedWallet=e}onDeposit(){var e,t;this.walletService.deposit(this.transfer,this.transferDescription,null===(e=this.selectedTeam)||void 0===e?void 0:e.wallet_id,null===(t=this.selectedTeam)||void 0===t?void 0:t.wallet_id).subscribe(e=>{this.selectedTeam.balance=+this.selectedTeam.balance+ +this.transfer,this.transferDescription="",this.errors=""},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}onWithdraw(){var e,t;this.walletService.withdraw(this.transfer,this.transferDescription,null===(e=this.selectedTeam)||void 0===e?void 0:e.wallet_id,null===(t=this.selectedTeam)||void 0===t?void 0:t.wallet_id).subscribe(e=>{this.selectedTeam.balance=+this.selectedTeam.balance-+this.transfer,this.transferDescription="",this.errors=""},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(u),o.Y36(p.X))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-team"]],decls:39,vars:13,consts:[[1,"grid"],[1,"col-6"],[1,"mb-2"],[1,"grid","mb-4"],[1,"col-4"],["placeholder","Select team","optionLabel","name",1,"col-4",3,"options","ngModel","ngModelChange"],["field","description","placeholder","Ex: 4bfc1524-ccd3-490a-9dee-a0c1a46c8bc0",1,"col-4",3,"ngModel","autofocus","size","suggestions","ngModelChange","completeMethod","onSelect"],["type","number","pInputText","",1,"col-4",3,"ngModel","ngModelChange"],["type","text","pInputText","",1,"col-4",3,"ngModel","ngModelChange"],["style","color:red;",4,"ngIf"],["pButton","","type","button","label","Deposit",1,"mt-4","mr-2",3,"click"],["pButton","","type","button","label","Withdraw",1,"mt-4","mr-2",3,"click"],["pButton","","type","button","label","Transfer",1,"mt-4",3,"click"],[1,"mt-4","team-info"],[2,"color","red"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h4",2),o._uU(3," Transfer money to wallet: "),o.qZA(),o.TgZ(4,"div"),o.TgZ(5,"div",3),o.TgZ(6,"span",4),o._uU(7,"Select team: "),o.qZA(),o.TgZ(8,"p-dropdown",5),o.NdJ("ngModelChange",function(e){return t.selectedTeam=e}),o.qZA(),o.qZA(),o.TgZ(9,"div",3),o.TgZ(10,"span",4),o._uU(11,"Find wallet address: User, team or Stock (Skip for Deposit and Withdraw)"),o.qZA(),o.TgZ(12,"p-autoComplete",6),o.NdJ("ngModelChange",function(e){return t.query=e})("completeMethod",function(){return t.searchWallets()})("onSelect",function(e){return t.selectWallet(e)}),o.qZA(),o.qZA(),o.TgZ(13,"div",3),o.TgZ(14,"span",4),o._uU(15,"Amount: "),o.qZA(),o.TgZ(16,"input",7),o.NdJ("ngModelChange",function(e){return t.transfer=e}),o.qZA(),o.qZA(),o.TgZ(17,"div",0),o.TgZ(18,"span",4),o._uU(19,"Description: "),o.qZA(),o.TgZ(20,"input",8),o.NdJ("ngModelChange",function(e){return t.transferDescription=e}),o.qZA(),o.qZA(),o.qZA(),o.YNc(21,f,2,1,"div",9),o.TgZ(22,"button",10),o.NdJ("click",function(){return t.onDeposit()}),o.qZA(),o.TgZ(23,"button",11),o.NdJ("click",function(){return t.onWithdraw()}),o.qZA(),o.TgZ(24,"button",12),o.NdJ("click",function(){return t.onTransfer()}),o.qZA(),o.qZA(),o.TgZ(25,"div",1),o.TgZ(26,"div",13),o.TgZ(27,"div"),o._uU(28," Team: "),o.TgZ(29,"strong"),o._uU(30),o.qZA(),o.qZA(),o.TgZ(31,"div"),o._uU(32," Balance: "),o.TgZ(33,"strong"),o._uU(34),o.qZA(),o.qZA(),o.TgZ(35,"div"),o._uU(36," Wallet address: "),o.TgZ(37,"strong"),o._uU(38),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(8),o.Q6J("options",t.teams)("ngModel",t.selectedTeam),o.xp6(4),o.Q6J("ngModel",t.query)("autofocus",!0)("size",30)("suggestions",t.wallets),o.xp6(4),o.Q6J("ngModel",t.transfer),o.xp6(4),o.Q6J("ngModel",t.transferDescription),o.xp6(1),o.Q6J("ngIf",t.errors),o.xp6(9),o.Oqu(null==t.selectedTeam?null:t.selectedTeam.name),o.xp6(4),o.AsE("",(+(null==t.selectedTeam?null:t.selectedTeam.balance)).toFixed(2)," ",null==t.selectedTeam?null:t.selectedTeam.currency,""),o.xp6(4),o.Oqu(null==t.selectedTeam?null:t.selectedTeam.wallet_address))},directives:[h.Lt,g.JJ,g.On,m.Qc,g.wV,g.Fj,T.o,s.O5,Z.Hq],styles:[".team-info[_ngcontent-%COMP%]{background:#ccc;border-radius:12px;padding:16px}"]}),e})(),canActivate:[l.a]}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[n.Bz.forChild(v)],n.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[s.ez,b,g.u5,g.UX,T.j,Z.hJ,h.kW,m.WN]]}),e})()}}]);