(self.webpackChunkwallet_client=self.webpackChunkwallet_client||[]).push([[446],{7446:(e,t,r)=>{"use strict";r.r(t),r.d(t,{WalletModule:()=>f});var s=r(8583),n=r(8994),i=r(8668);class o{constructor(){this.user_id=0,this.user_email="",this.wallet_id=0,this.wallet_address=""}}var l=r(5240),u=r(639),a=r(3071),c=r(4853),d=r(665),h=r(3928),g=r(4207),Z=r(6516);function p(e,t){if(1&e&&(u.TgZ(0,"h5",18),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.hij(" ",e.errors,"")}}const q=[{path:"",component:(()=>{class e{constructor(e,t){this.userService=e,this.walletService=t,this.deposit=0,this.withdraw=0,this.transfer=0,this.amount=0,this.depositDescription="",this.withdrawDescription="",this.transferDescription="",this.amountDescription="",this.query="",this.users=[],this.selectedUser=new o,this.wallets=[],this.selectedWallet=new l.w}ngOnInit(){this.userService.me().subscribe(e=>{this.user=e})}onDeposit(){this.walletService.deposit(this.deposit,this.depositDescription).subscribe(e=>{this.user.balance=+this.user.balance+ +this.deposit,this.deposit=0,this.depositDescription="",this.errors=null},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}onWithdraw(){this.walletService.withdraw(this.withdraw,this.withdrawDescription).subscribe(e=>{this.user.balance=+this.user.balance-+this.withdraw,this.withdraw=0,this.withdrawDescription="",this.errors=null},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}onTransfer(){this.walletService.transfer(this.selectedUser.wallet_id,this.transfer,this.transferDescription).subscribe(e=>{this.user.balance=+this.user.balance-+this.transfer,this.transfer=0,this.transferDescription="",this.errors=null},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}onTransferWallet(){var e;this.walletService.transfer(null===(e=this.selectedWallet)||void 0===e?void 0:e.id,this.amount,this.transferDescription).subscribe(e=>{this.user.balance=+this.user.balance-+this.amount,this.amount=0,this.amountDescription="",this.errors=null},e=>{var t;this.errors=(null===(t=e.error.message)||void 0===t?void 0:t.join(", "))||e.error.error})}searchUsers(){this.userService.searchUsers(this.query).subscribe(e=>{this.users=e})}selectUser(e){this.selectedUser=e}searchWallets(){this.walletService.searchWallets(this.query).subscribe(e=>{this.wallets=e})}selectWallet(e){this.selectedWallet=e}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(a.K),u.Y36(c.X))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-my-wallet"]],decls:81,vars:21,consts:[[1,"grid"],[1,"col-4","wallet--info"],[1,"mb-1"],[1,"col-8"],[1,"ml-4"],["style","color: red;",4,"ngIf"],[1,"mb-4"],[1,"mb-2"],[1,"grid","mb-4"],[1,"col-3"],["type","number","min","0","pInputText","",1,"col-3",3,"ngModel","ngModelChange"],["type","text","pInputText","",1,"col-3",3,"ngModel","ngModelChange"],["pButton","","type","button","label","Deposit",3,"click"],["pButton","","type","button","label","Withdraw",3,"click"],["field","user_email","placeholder","Ex: jerry@gmail.com",1,"col-3",3,"ngModel","autofocus","size","suggestions","ngModelChange","completeMethod","onSelect"],["type","number","pInputText","",1,"col-3",3,"ngModel","ngModelChange"],["pButton","","type","button","label","Transfer",3,"click"],["field","description","placeholder","Ex: 4bfc1524-ccd3-490a-9dee-a0c1a46c8bc0",1,"col-4",3,"ngModel","autofocus","size","suggestions","ngModelChange","completeMethod","onSelect"],[2,"color","red"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h3"),u._uU(3,"My wallet"),u.qZA(),u.TgZ(4,"div",2),u._uU(5," Email: "),u.TgZ(6,"strong"),u._uU(7),u.qZA(),u.qZA(),u.TgZ(8,"div",2),u._uU(9," Balance: "),u.TgZ(10,"strong"),u._uU(11),u.qZA(),u.qZA(),u.TgZ(12,"div",2),u._uU(13," Wallet address: "),u.TgZ(14,"strong"),u._uU(15),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"div",3),u.TgZ(17,"div",4),u.TgZ(18,"h3"),u._uU(19,"Action"),u.qZA(),u.YNc(20,p,2,1,"h5",5),u.TgZ(21,"div",6),u.TgZ(22,"h4",7),u._uU(23," Deposit money "),u.qZA(),u.TgZ(24,"div"),u.TgZ(25,"div",8),u.TgZ(26,"span",9),u._uU(27,"Amount: "),u.qZA(),u.TgZ(28,"input",10),u.NdJ("ngModelChange",function(e){return t.deposit=e}),u.qZA(),u.qZA(),u.TgZ(29,"div",0),u.TgZ(30,"span",9),u._uU(31,"Description: "),u.qZA(),u.TgZ(32,"input",11),u.NdJ("ngModelChange",function(e){return t.depositDescription=e}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(33,"button",12),u.NdJ("click",function(){return t.onDeposit()}),u.qZA(),u.qZA(),u.TgZ(34,"div",6),u.TgZ(35,"h4",7),u._uU(36," Withdraw money: "),u.qZA(),u.TgZ(37,"div"),u.TgZ(38,"div",8),u.TgZ(39,"span",9),u._uU(40,"Amount: "),u.qZA(),u.TgZ(41,"input",10),u.NdJ("ngModelChange",function(e){return t.withdraw=e}),u.qZA(),u.qZA(),u.TgZ(42,"div",0),u.TgZ(43,"span",9),u._uU(44,"Description: "),u.qZA(),u.TgZ(45,"input",11),u.NdJ("ngModelChange",function(e){return t.withdrawDescription=e}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(46,"button",13),u.NdJ("click",function(){return t.onWithdraw()}),u.qZA(),u.qZA(),u.TgZ(47,"div",6),u.TgZ(48,"h4",7),u._uU(49," Transfer money to user or user wallet: "),u.qZA(),u.TgZ(50,"div"),u.TgZ(51,"div",8),u.TgZ(52,"span",9),u._uU(53,"Find user or user wallet address:"),u.qZA(),u.TgZ(54,"p-autoComplete",14),u.NdJ("ngModelChange",function(e){return t.query=e})("completeMethod",function(){return t.searchUsers()})("onSelect",function(e){return t.selectUser(e)}),u.qZA(),u.qZA(),u.TgZ(55,"div",8),u.TgZ(56,"span",9),u._uU(57,"Amount: "),u.qZA(),u.TgZ(58,"input",15),u.NdJ("ngModelChange",function(e){return t.transfer=e}),u.qZA(),u.qZA(),u.TgZ(59,"div",0),u.TgZ(60,"span",9),u._uU(61,"Description: "),u.qZA(),u.TgZ(62,"input",11),u.NdJ("ngModelChange",function(e){return t.transferDescription=e}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(63,"button",16),u.NdJ("click",function(){return t.onTransfer()}),u.qZA(),u.qZA(),u.TgZ(64,"div",6),u.TgZ(65,"h4",7),u._uU(66," Transfer money to a wallet: (User , Team or Stock) "),u.qZA(),u.TgZ(67,"div"),u.TgZ(68,"div",8),u.TgZ(69,"span",9),u._uU(70,"Find wallet by address:"),u.qZA(),u.TgZ(71,"p-autoComplete",17),u.NdJ("ngModelChange",function(e){return t.query=e})("completeMethod",function(){return t.searchWallets()})("onSelect",function(e){return t.selectWallet(e)}),u.qZA(),u.qZA(),u.TgZ(72,"div",8),u.TgZ(73,"span",9),u._uU(74,"Amount: "),u.qZA(),u.TgZ(75,"input",15),u.NdJ("ngModelChange",function(e){return t.amount=e}),u.qZA(),u.qZA(),u.TgZ(76,"div",0),u.TgZ(77,"span",9),u._uU(78,"Description: "),u.qZA(),u.TgZ(79,"input",11),u.NdJ("ngModelChange",function(e){return t.amountDescription=e}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(80,"button",16),u.NdJ("click",function(){return t.onTransferWallet()}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(7),u.Oqu(null==t.user?null:t.user.email),u.xp6(4),u.AsE("",(+(null==t.user?null:t.user.balance)).toFixed(2)," ",null==t.user?null:t.user.currency,""),u.xp6(4),u.Oqu(null==t.user?null:t.user.wallet_address),u.xp6(5),u.Q6J("ngIf",t.errors),u.xp6(8),u.Q6J("ngModel",t.deposit),u.xp6(4),u.Q6J("ngModel",t.depositDescription),u.xp6(9),u.Q6J("ngModel",t.withdraw),u.xp6(4),u.Q6J("ngModel",t.withdrawDescription),u.xp6(9),u.Q6J("ngModel",t.query)("autofocus",!0)("size",30)("suggestions",t.users),u.xp6(4),u.Q6J("ngModel",t.transfer),u.xp6(4),u.Q6J("ngModel",t.transferDescription),u.xp6(9),u.Q6J("ngModel",t.query)("autofocus",!0)("size",30)("suggestions",t.wallets),u.xp6(4),u.Q6J("ngModel",t.amount),u.xp6(4),u.Q6J("ngModel",t.amountDescription))},directives:[s.O5,d.qQ,d.wV,d.Fj,h.o,d.JJ,d.On,g.Hq,Z.Qc],styles:[".wallet--info[_ngcontent-%COMP%]{background:#ccc;border-radius:12px;padding:16px}"]}),e})(),canActivate:[i.a]}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.Bz.forChild(q)],n.Bz]}),e})();var A=r(9529);let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.ez,T,d.u5,d.UX,h.j,g.hJ,A.kW,Z.WN]]}),e})()}}]);